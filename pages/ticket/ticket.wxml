<!--pages/ticket/ticket.wxml-->
<view class="container">
	<mp-tabs tabs="{{tabs}}" activeTab="{{activeTab}}" swiperClass="weui-tabs-swiper" swiperStyle="height:{{swiperHeight}}px" bindtabclick="onTabClick" bindchange="onChange" activeClass="tab-bar-title__selected">
		<block wx:for="{{tabs}}" wx:key="title">
			<view class="tab-content" slot="tab-content-{{index}}">
				<block wx:if="{{index == 0}}">
					<view class="ticket_content">
						<block wx:for="{{ticketList[activeTab]}}" wx:key="index">
							<m-ticket ticket="{{ticketList[activeTab][index]}}" 
										bind:isCountDownFinsh="triggerCountDownFinish" isShowExpireTime="{{true}}" isExpireTimeCanTap="{{false}}">
								<view class="ticket_slot" slot="ticket_slot"> 
									<button data-index="{{index}}" class="btn" type="primary" bindtap="tapUse">使用</button>
								</view>
							</m-ticket>
						</block>
					</view>
				</block>

				<block wx:if="{{index == 1}}">
					<view class="ticket_content">
						<block wx:for="{{ticketList[activeTab]}}" wx:key="index">
							<m-ticket ticket="{{ticketList[activeTab][index]}}" 
												isShow="{{ticketList[activeTab][index].dataJsonSet.ticket_use_state === 1 && ticketList[activeTab][index].dataJsonSet.ticket_type === 1}}"
												isShowExpireTime="{{true}}" isExpireTimeCanTap="{{false}}">
								<view class="ticket_slot" slot="ticket_slot"> 
									<block wx:if="{{ticketList[activeTab][index].dataJsonSet.ticket_use_state === 1}}">
										<button data-index="{{index}}" class="btn" type="primary" bind:tap="tapFinish">完成</button>
									</block>
									<block wx:else>
										<button data-index="{{index}}" class="btn t" type="primary">确认使用</button>
									</block>
								</view>
							</m-ticket>
						</block>
					</view>
				</block>

				<block wx:if="{{index == 2}}">
					<view class="ticket_content">
						<block wx:for="{{ticketList[activeTab]}}" wx:key="index">
							<m-ticket ticket="{{ticketList[activeTab][index]}}" isFinish="{{ticketList[activeTab][index].dataJsonSet.ticket_use_state === 1}}"
							isShowExpireTime="{{true}}" isExpireTimeCanTap="{{false}}">
							</m-ticket>
						</block>
					</view>
				</block>
				
				<block wx:if="{{index == 3}}">
					<view class="ticket_content">
						<block wx:for="{{ticketList[activeTab]}}" wx:key="index">
							<m-ticket ticket="{{ticketList[activeTab][index]}}" isShowExpireTime="{{true}}" isExpireTimeCanTap="{{false}}">
							</m-ticket>
						</block>
					</view>
				</block>
			</view>
		</block>
	</mp-tabs>
</view>